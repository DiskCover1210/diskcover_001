<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd"
    >
<html lang="en">
<head>
    <title>Subir clubes</title>
	<script src="mootools-core-1.3.2-full-compat-yc.js" type="text/javascript"></script>
	<script language="javascript">
  
	//defino un array
	/*
		user para validacion
		pass para validacion
		
		resto de la matriz
		
		email obligatorio,
	    password obligatorio,
	    name obligatorio,
	    display_name obligatorio,
	    phone obligatorio,
	    status  obligatorio,
	    address1 opcional,
	    address2 opcional,
	    city opcional,
	    state opcional,
	    country opcional,
	    zip  opcional,
	    last_login opcional
	*/
	var datosClub = [
		[
			"prueba@prueba.com",
			"suclave"
		],
		[
			"clubprueba@hotmail.com",
			"clubprueba",
			"clubprueba",
			"clubprueba",
			"456789876",
			"pending"
		],
		[
			"clubprueba1@hotmail.com",
			"clubprueba1",
			"clubprueba1",
			"clubprueba1",
			"456789876",
			"pending",
			'clubprueba1',
			'clubprueba1',
			'clubprueba1',
			'clubprueba1',
			'clubprueba1',
			"0"
		],
		[
			"clubprueba2@hotmail.com",
			"clubprueba2",
			"clubprueba2",
			"clubprueba2",
			"456789876",
			"pending"
		],
		[
			"clubprueba4@hotmail.com",
			"clubprueba4",
			"clubprueba4",
			"clubprueba4",
			"456789876",
			"pending",
			'clubprueba4',
			'clubprueba4',
			'clubprueba4'
		],
		[
			"clubprueba5@hotmail.com",
			"clubprueba5",
			"clubprueba5",
			"clubprueba5",
			"456789876",
			"pending",
			'clubprueba5',
			'clubprueba5',
			'clubprueba5'
		]
	];
	/*var datosClub = [
	 {
	  "user":"prueba@prueba.com",
	  "pass":"clave"
	 },
	 {
	  "email":"Alex@test.com",
	  "password": "testxx",
	  "name":"AlexFC",
	  "phone": "2112121212",
	  "status":"pending"
	 }
	];
	{"datos":"test"}
	prueba postman
	{"datos":[
	 {
	  "user":"prueba@prueba.com",
	  "pass":"clave"
	 },
	 {
	  "email":"Alex@test.com",
	  "password": "testxx",
	  "name":"AlexFC",
	  "phone": "2112121212",
	  "status":"pending"
	 }
	]}
	*/
	window.addEvent('domready', function(){
		//convierto ese array en un JSON con Mootools
		var miJSON = JSON.encode(datosClub);
		console.info(miJSON);
		//alert(miJSON);
		//pondríamos esto para ver el JSON generado en la capa con id=resultado
		//$('resultado').set("html", "<pre>" + miJSON + "</pre>");
		
		//creo una conexión
		var miAjax = new Request({
			//url: "http://msistorepro.com/ajax/guardar_club.php",
			url: "http://localhost/php/vista/API/recibirinf.php?club_id=1",
			//dataType: 'jsonp',
			data: "datos=" + miJSON,
			onSuccess: function(textoRespuesta){
				$('resultado').set("html", textoRespuesta);
				$.each(response.data.clubes, function( key, value ) {
                    output += "<h2>Detalles del club " + value['club_id'] + "</h2>";
                    //recorremos los valores de cada usuario
                    $.each( value, function ( userkey, uservalue) {
                        output += '<ul>';
                        output += '<li>' + userkey + ': ' + uservalue + "</li>";
                        output += '</ul>';
                    });
                });
			},
			onFailure: function(){
				$('resultado').set("html", "fallo en la conexión Ajax");
			}
		})
		miAjax.send();
	});
	</script>	
</head>
<body>
    <h1>Subir clubes</h1>
	<div id="resultado"></div>
</body>
</html>
